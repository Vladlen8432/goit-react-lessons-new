"use strict";(self.webpackChunkgoit_react_lessons_new=self.webpackChunkgoit_react_lessons_new||[]).push([[607],{8607:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var o,r=n(3433),c=n(1413),s=n(2791),i=n(4420),l="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",u=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="",n=crypto.getRandomValues(new Uint8Array(e));e--;)t+=l[63&n[e]];return t},d="Product_product__hQeO1",a="Product_productImg__+a4qi",h="Product_discountBage__jCcC4",p="Product_productAddToCardBtn__78QIo",x=n(9153),f=n(184),m=function(e){var t=e.title,n=e.price,o=e.imageURL,r=e.discount,c=e.handleDeleteProduct,i=e.id,l=(0,s.useContext)(x.t),u=l.dayOfTheMonth,m=l.openModal;console.log("dayOfTheMonth",u);var j={backgroundColor:r?"#00b300":"#d9d9d9"};return(0,f.jsxs)("div",{className:d,style:j,children:[(0,f.jsxs)("h4",{children:["Day of the month: ",u]}),(0,f.jsx)("img",{className:a,src:o,alt:"Tacos With Lime",width:"640"}),(0,f.jsx)("h2",{children:t}),r&&(0,f.jsxs)("h3",{className:h,children:["Discount: ",r,"$"]}),(0,f.jsxs)("p",{children:[n,"$"]}),(0,f.jsx)("button",{className:p,type:"button",children:"Add to cart"}),(0,f.jsx)("button",{onClick:function(){return m({title:t,price:n,discount:r})},className:p,type:"button",children:"See the details"}),(0,f.jsx)("button",{onClick:function(){return c(i)},className:p,type:"button",children:"\xd7"})]})},j="Section_section__Z2PLw",b=function(e){var t=e.children,n=e.title,o=void 0!==n&&n;return(0,f.jsxs)("section",{className:j,children:[o&&(0,f.jsx)("h2",{children:o}),t]})},v=n(9439),g={form:"ProductForm_form__g-Bdi",labelText:"ProductForm_labelText__TbfmW"},_=function(e){var t=e.handleAddProduct,n=(0,s.useState)(""),o=(0,v.Z)(n,2),r=o[0],c=o[1],i=(0,s.useState)(""),l=(0,v.Z)(i,2),u=l[0],d=l[1],a=(0,s.useState)(!1),h=(0,v.Z)(a,2),p=h[0],x=h[1],m=(0,s.useState)(""),j=(0,v.Z)(m,2),b=j[0],_=j[1],y=function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;switch(e.target.name){case"title":return void c(t);case"price":return void d(t);case"hasDiscount":return void x(t);case"discount":return void _(t);default:return}};return(0,f.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={title:r,price:Number.parseFloat(u),discount:p?Number.parseFloat(b):null};t(n),c(""),d(""),x(!1),_("")},className:g.form,children:["Spagetti"===r&&(0,f.jsx)("h2",{children:"Congrats! You won a promocode - 777"}),(0,f.jsxs)("label",{className:g.formLabel,children:[(0,f.jsx)("p",{className:g.labelText,children:"Title:"}),(0,f.jsx)("input",{type:"text",name:"title",onChange:y,value:r})]}),(0,f.jsxs)("label",{className:g.formLabel,children:[(0,f.jsx)("p",{className:g.labelText,children:"Price:"}),(0,f.jsx)("input",{type:"text",name:"price",onChange:y,value:u})]}),(0,f.jsxs)("label",{className:g.formLabel,children:[(0,f.jsx)("input",{type:"checkbox",name:"hasDiscount",onChange:y,checked:p}),"Has discount?"]}),p&&(0,f.jsxs)("label",{className:g.formLabel,children:[(0,f.jsx)("p",{className:g.labelText,children:"Discount:"}),(0,f.jsx)("input",{type:"text",name:"discount",onChange:y,value:b})]}),(0,f.jsx)("button",{type:"submit",children:"Add product"})]})},y=n(168),w=n(5867).ZP.div(o||(o=(0,y.Z)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background-color: rgba(0, 0, 0, 0.5);\n\n  .modal {\n    padding: 20px;\n    max-width: 450px;\n    width: 100%;\n    min-height: 450px;\n    background-color: white;\n    border-radius: 10px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    &:hover {\n      cursor: auto;\n    }\n  }\n\n  .closeBtn {\n    position: absolute;\n    top: 15px;\n    right: 15px;\n  }\n"]))),C=function(){var e=(0,s.useContext)(x.t),t=e.modalData,n=e.closeModal,o=(0,s.useState)(1),r=(0,v.Z)(o,2),c=r[0],i=r[1],l=(0,s.useRef)(),u=(0,s.useRef)(!0);console.log("inputRef:",l.current),(0,s.useEffect)((function(){var e=function(e){"Escape"===e.code&&n()};return window.addEventListener("keydown",e),document.body.style.overflow="hidden",function(){window.addEventListener("keydown",e),document.body.style.overflow="auto"}}),[n]);(0,s.useEffect)((function(){l.current&&l.current.focus()}));return(0,s.useEffect)((function(){return!1===u.current&&console.log("counter changed",c),function(){u.current=!1}}),[c]),(0,f.jsx)(w,{onClick:function(e){e.target===e.currentTarget&&n()},children:(0,f.jsxs)("div",{className:"modal",children:[(0,f.jsx)("button",{onClick:n,className:"closeBtn",children:"\xd7"}),(0,f.jsx)("h2",{children:"Product details"}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("h3",{children:["Title: ",t.title]}),(0,f.jsxs)("p",{children:["Price: ",t.price,"$"]}),(0,f.jsxs)("p",{children:["Discount: ",t.discount,"$"]})]}),(0,f.jsx)("input",{ref:l,type:"text"}),(0,f.jsx)("button",{onClick:function(){console.log("inputRef:",l.current),l.current.focus()},children:"Select input"}),(0,f.jsx)("br",{}),(0,f.jsxs)("button",{onClick:function(){return i((function(e){return e+1}))},children:["Product count: ",c]})]})})},N="App_productList__ZcthI",k=function(){var e=(0,i.I0)(),t=(0,s.useContext)(x.t).isOpenModal,n=(0,i.v9)((function(e){return e.productsStore.products}));console.log("products:",n);var o=function(t){e({type:"products/deleteProducts",payload:t})},l=(0,r.Z)(n).sort((function(e,t){return t.discount-e.discount}));return(0,f.jsxs)("div",{children:[(0,f.jsx)(b,{children:(0,f.jsx)("h1",{children:"LOGO"})}),(0,f.jsx)(b,{title:"Add product form",children:(0,f.jsx)(_,{handleAddProduct:function(t){if(n.some((function(e){return e.title===t.title})))alert("Oops, product with title '".concat(t.title,"' already exist"));else{var o=(0,c.Z)((0,c.Z)({},t),{},{id:u()});e({type:"products/addProducts",payload:o})}}})}),(0,f.jsx)(b,{title:"Product list",children:(0,f.jsx)("div",{className:N,children:l.map((function(e){return(0,f.jsx)(m,{id:e.id,title:e.title,price:e.price,discount:e.discount,imageURL:e.imageURL,handleDeleteProduct:o},e.id)}))})}),t&&(0,f.jsx)(C,{})]})}}}]);
//# sourceMappingURL=607.f6b0443d.chunk.js.map